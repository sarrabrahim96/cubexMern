{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/cubex2/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/cubex2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/User/Desktop/cubex2/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/User/Desktop/cubex2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/User/Desktop/cubex2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Icon}from'@iconify/react';import Div from'../../Div';import Spacing from'../../Spacing';import React,{useState,useContext,useEffect}from'react';import axios from'axios';import{useParams}from'react-router-dom';import{GlobalState}from'../../../GlobalState';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialeState={username:'',email:'',password:'',role:'',_id:''};function UpdateUser(){var param=useParams();var state=useContext(GlobalState);var _useState=useState(initialeState),_useState2=_slicedToArray(_useState,2),User=_useState2[0],setUser=_useState2[1];var _state$UserApi$isAdmi=_slicedToArray(state.UserApi.isAdmin,1),isAdmin=_state$UserApi$isAdmi[0];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),onEdit=_useState4[0],setOnEdit=_useState4[1];var _state$UsersAPI$Users=_slicedToArray(state.UsersAPI.Users,1),Users=_state$UsersAPI$Users[0];useEffect(function(){if(param.id){setOnEdit(true);Users.forEach(function(user){if(user._id===param.id){setUser(user);}});}else{setUser(initialeState);setOnEdit(false);}},[param.id,Users]);var HandleChangeInput=function HandleChangeInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},User),{},_defineProperty({},name,value)));};var HandleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;if(isAdmin){_context.next=4;break;}return _context.abrupt(\"return\",alert(\"vous n'étes pas un admin.\"));case 4:_context.next=6;return axios.put(\"https://cubexback.online/user/updateUser/\".concat(Users._id),_objectSpread({},User));case 6:_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);alert(_context.t0.response.data.msg);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function HandleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spacing,{lg:\"150\",md:\"80\"}),/*#__PURE__*/_jsxs(Div,{className:\"container\",children:[/*#__PURE__*/_jsx(Div,{className:\"row\"}),/*#__PURE__*/_jsx(Div,{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"#\",className:\"row\",onSubmit:HandleSubmit,children:[/*#__PURE__*/_jsxs(Div,{className:\"col-sm-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"cs-primary_color\",children:\"ID User\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"cs-form_field\",name:\"User_id\",value:User._id,onChange:HandleChangeInput,disabled:onEdit}),/*#__PURE__*/_jsx(Spacing,{lg:\"20\",md:\"20\"})]}),/*#__PURE__*/_jsxs(Div,{className:\"col-sm-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"cs-primary_color\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"cs-form_field\",name:\"username\",value:User.username,onChange:HandleChangeInput,disabled:onEdit}),/*#__PURE__*/_jsx(Spacing,{lg:\"20\",md:\"20\"})]}),/*#__PURE__*/_jsxs(Div,{className:\"col-sm-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"cs-primary_color\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"cs-form_field\",name:\"email\",value:User.email,onChange:HandleChangeInput,disabled:onEdit}),/*#__PURE__*/_jsx(Spacing,{lg:\"20\",md:\"20\"})]}),/*#__PURE__*/_jsxs(Div,{className:\"col-sm-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"cs-primary_color\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"password\",className:\"cs-form_field\",value:User.password,onChange:HandleChangeInput,disabled:onEdit}),/*#__PURE__*/_jsx(Spacing,{lg:\"20\",md:\"20\"})]}),/*#__PURE__*/_jsxs(Div,{className:\"col-sm-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"cs-primary_color\",children:\"Role\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"role\",className:\"cs-form_field\",value:User.role,onChange:HandleChangeInput}),/*#__PURE__*/_jsx(Spacing,{lg:\"20\",md:\"20\"})]}),/*#__PURE__*/_jsx(Spacing,{lg:\"25\",md:\"25\"}),/*#__PURE__*/_jsxs(Div,{className:\"col-sm-12\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"cs-btn cs-style1\",type:\"submit\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Modifier\"}),/*#__PURE__*/_jsx(Icon,{icon:\"bi:arrow-right\"})]}),/*#__PURE__*/_jsx(Spacing,{lg:\"25\",md:\"25\"})]})]})})]})]});}export default UpdateUser;","map":{"version":3,"names":["Icon","Div","Spacing","React","useState","useContext","useEffect","axios","useParams","GlobalState","initialeState","username","email","password","role","_id","UpdateUser","param","state","User","setUser","UserApi","isAdmin","onEdit","setOnEdit","UsersAPI","Users","id","forEach","user","HandleChangeInput","e","target","name","value","HandleSubmit","preventDefault","alert","put","response","data","msg"],"sources":["C:/Users/User/Desktop/cubex2/client/src/components/Pages/user/UpdateUser.jsx"],"sourcesContent":["\r\nimport { Icon } from '@iconify/react';\r\nimport Div from '../../Div';\r\nimport Spacing from '../../Spacing';\r\nimport React ,{useState , useContext , useEffect} from 'react'\r\nimport axios from 'axios'\r\nimport {useParams} from 'react-router-dom'\r\nimport {GlobalState} from '../../../GlobalState'\r\n\r\nconst initialeState ={\r\n    username:'',\r\n    email:'',\r\n    password:'',\r\n    role:'',\r\n    _id : ''\r\n  }\r\n\r\nfunction UpdateUser() {\r\n     const param = useParams()\r\n     const state = useContext(GlobalState)\r\n     const [User , setUser] = useState(initialeState)\r\n     const [isAdmin] = state.UserApi.isAdmin\r\n     const [onEdit , setOnEdit] = useState(false)\r\n     const [Users] = state.UsersAPI.Users\r\n\r\n\r\n     useEffect(()=>{\r\n        if(param.id){\r\n            setOnEdit(true)\r\n            Users.forEach(user => {\r\n                if(user._id === param.id) {\r\n                    setUser(user)\r\n                   \r\n                }\r\n            });\r\n           \r\n        }else{\r\n            setUser(initialeState)\r\n            setOnEdit(false)\r\n        }\r\n    },[param.id , Users])\r\n\r\n\r\n\r\n\r\n    const HandleChangeInput = e =>{\r\n        const {name , value} = e.target\r\n        setUser({...User , [name]:value})\r\n    }\r\n\r\n    const HandleSubmit = async e =>{\r\n        e.preventDefault()\r\n        try {\r\n        if(!isAdmin) return alert(\"vous n'étes pas un admin.\")\r\n        await axios.put(`https://cubexback.online/user/updateUser/${Users._id}` , {...User})\r\n          } \r\n        catch (error) {\r\n           alert(error.response.data.msg)\r\n        }\r\n       }\r\n\r\n\r\n \r\n    \r\n  return (\r\n    <>\r\n\r\n     <Spacing lg=\"150\" md=\"80\" />\r\n      <Div className=\"container\">\r\n        <Div className=\"row\">\r\n    \r\n          </Div>\r\n          <Div className=\"col-lg-6\">\r\n            <form action=\"#\" className=\"row\" onSubmit={HandleSubmit}>\r\n              <Div className=\"col-sm-6\">\r\n                <label className=\"cs-primary_color\">ID User</label>\r\n                <input type=\"text\" className=\"cs-form_field\" name='User_id'\r\n                value={User._id} onChange={HandleChangeInput} disabled={onEdit} />\r\n                <Spacing lg=\"20\" md=\"20\" />\r\n              </Div>\r\n              <Div className=\"col-sm-6\">\r\n                <label className=\"cs-primary_color\">Username</label>\r\n                <input type=\"text\" className=\"cs-form_field\" name='username'\r\n                value={User.username} onChange={HandleChangeInput} disabled={onEdit}/>\r\n                <Spacing lg=\"20\" md=\"20\" />\r\n              </Div>\r\n              <Div className=\"col-sm-6\">\r\n                <label className=\"cs-primary_color\">Email</label>\r\n                <input type=\"text\" className=\"cs-form_field\" name='email'\r\n                value={User.email} onChange={HandleChangeInput} disabled={onEdit}/>\r\n                <Spacing lg=\"20\" md=\"20\" />\r\n              </Div>\r\n              <Div className=\"col-sm-6\">\r\n                <label className=\"cs-primary_color\">Password</label>\r\n                <input type=\"text\" name='password' className=\"cs-form_field\"\r\n                value={User.password} onChange={HandleChangeInput} disabled={onEdit} />\r\n                <Spacing lg=\"20\" md=\"20\" />\r\n              </Div>\r\n              <Div className=\"col-sm-6\">\r\n                <label className=\"cs-primary_color\">Role</label>\r\n                <input type=\"number\" name='role' className=\"cs-form_field\"\r\n                value={User.role} onChange={HandleChangeInput} />\r\n                <Spacing lg=\"20\" md=\"20\" />\r\n              </Div>\r\n              <Spacing lg=\"25\" md=\"25\" />\r\n              <Div className=\"col-sm-12\">\r\n                <button className=\"cs-btn cs-style1\" type='submit'>\r\n                  <span>Modifier</span>\r\n                  <Icon icon=\"bi:arrow-right\" />\r\n                </button>\r\n                <Spacing lg=\"25\" md=\"25\" />\r\n              \r\n\r\n              </Div>\r\n            </form>\r\n          </Div>\r\n        </Div>\r\n      </>\r\n  )\r\n}\r\n\r\nexport default UpdateUser"],"mappings":"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"},"metadata":{},"sourceType":"module"}