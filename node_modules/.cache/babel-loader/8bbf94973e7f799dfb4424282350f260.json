{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/cubex2/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/cubex2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Desktop/cubex2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';function UserApi(token){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLogged=_useState2[0],setIsLogged=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAdmin=_useState4[0],setIsAdmin=_useState4[1];useEffect(function(){if(token){var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/user/infor',{headers:{Authorization:token}});case 3:res=_context.sent;setIsLogged(true);res.data.role===1?setIsAdmin(true):setIsAdmin(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);alert(_context.t0.response.data.msg);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getUsers(){return _ref.apply(this,arguments);};}();getUsers();}},[token]);return{isLogged:[isLogged,setIsLogged],isAdmin:[isAdmin,setIsAdmin]};}export default UserApi;","map":{"version":3,"names":["useState","useEffect","axios","UserApi","token","isLogged","setIsLogged","isAdmin","setIsAdmin","getUsers","get","headers","Authorization","res","data","role","alert","response","msg"],"sources":["C:/Users/User/Desktop/cubex2/client/src/api/UserApi.js"],"sourcesContent":["import  {useState , useEffect} from 'react'\r\nimport axios from 'axios'\r\n\r\nfunction UserApi(token) {\r\n    const[isLogged , setIsLogged]= useState(false)\r\n    const[isAdmin , setIsAdmin]= useState(false)\r\nuseEffect(()=> {\r\n        if(token) {\r\n            const getUsers = async () =>{\r\n                try {\r\n                    const res = await axios.get('/user/infor' , {\r\n                        headers : {Authorization: token}\r\n                     \r\n                    }) \r\n                     \r\n                    setIsLogged(true)\r\n                    res.data.role === 1 ? setIsAdmin(true) : setIsAdmin(false)\r\n                  } catch (error) {\r\n                    alert(error.response.data.msg)\r\n                }\r\n            }\r\n            getUsers() \r\n        }\r\n\r\n    },[token])\r\n  return{\r\n    isLogged:[isLogged , setIsLogged],\r\n    isAdmin :[isAdmin , setIsAdmin] \r\n  }\r\n}\r\n\r\nexport default UserApi"],"mappings":"2XAAA,OAASA,QAAQ,CAAGC,SAAS,KAAO,OAAO,CAC3C,MAAOC,MAAK,KAAM,OAAO,CAEzB,QAASC,QAAO,CAACC,KAAK,CAAE,CACpB,cAA+BJ,QAAQ,CAAC,KAAK,CAAC,wCAAxCK,QAAQ,eAAGC,WAAW,eAC5B,eAA6BN,QAAQ,CAAC,KAAK,CAAC,yCAAtCO,OAAO,eAAGC,UAAU,eAC9BP,SAAS,CAAC,UAAK,CACP,GAAGG,KAAK,CAAE,CACN,GAAMK,SAAQ,4FAAG,mLAESP,MAAK,CAACQ,GAAG,CAAC,aAAa,CAAG,CACxCC,OAAO,CAAG,CAACC,aAAa,CAAER,KAAK,CAEnC,CAAC,CAAC,QAHIS,GAAG,eAKTP,WAAW,CAAC,IAAI,CAAC,CACjBO,GAAG,CAACC,IAAI,CAACC,IAAI,GAAK,CAAC,CAAGP,UAAU,CAAC,IAAI,CAAC,CAAGA,UAAU,CAAC,KAAK,CAAC,gFAE1DQ,KAAK,CAAC,YAAMC,QAAQ,CAACH,IAAI,CAACI,GAAG,CAAC,qEAErC,kBAZKT,SAAQ,0CAYb,CACDA,QAAQ,EAAE,CACd,CAEJ,CAAC,CAAC,CAACL,KAAK,CAAC,CAAC,CACZ,MAAM,CACJC,QAAQ,CAAC,CAACA,QAAQ,CAAGC,WAAW,CAAC,CACjCC,OAAO,CAAE,CAACA,OAAO,CAAGC,UAAU,CAChC,CAAC,CACH,CAEA,cAAeL,QAAO"},"metadata":{},"sourceType":"module"}